<?xml version="1.0"?>
<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. See accompanying LICENSE file.
-->
<configuration>
    <property>
        <name>yarn.acl.enable</name>
        <value>true</value>
    </property>
    <property>
        <name>yarn.admin.acl</name>
        <value>hadp</value>
    </property>
    <property>
        <name>yarn.log-aggregation-enable</name>
        <value>true</value>
    </property>
    <property>
        <name>yarn.resourcemanager.address</name>
        <value>BJHC-HADOOP-pandora-16778.hadoop.jd.local:8032</value>
    </property>
    <property>
        <name>yarn.resourcemanager.scheduler.address</name>
        <value>BJHC-HADOOP-pandora-16778.hadoop.jd.local:8030</value>
    </property>
    <property>
        <name>yarn.resourcemanager.resource-tracker.address</name>
        <value>BJHC-HADOOP-pandora-16778.hadoop.jd.local:8031</value>
    </property>
    <property>
        <name>yarn.resourcemanager.admin.address</name>
        <value>BJHC-HADOOP-pandora-16778.hadoop.jd.local:8033</value>
    </property>
    <property>
        <name>yarn.resourcemanager.webapp.address</name>
        <value>BJHC-HADOOP-pandora-16778.hadoop.jd.local:50320</value>
    </property>
    <property>
        <name>yarn.nodemanager.local-dirs</name>
        <value>/data0/yarn/local,/data1/yarn/local,/data2/yarn/local,/data3/yarn/local,/data4/yarn/local,/data5/yarn/local,/data6/yarn/local,/data7/yarn/local,/data8/yarn/local,/data9/yarn/local,/data10/yarn/local,/data11/yarn/local</value>
    </property>
    <!--
    <property>
        <name>yarn.nodemanager.local-dirs</name>
        <value>/data0/yarn/local</value>
    </property>
    -->
    <property>
        <name>yarn.nodemanager.log-dirs</name>
        <value>/data0/yarn/logs</value>
    </property>
<!--
    <property>
        <name>yarn.nodemanager.log-dirs</name>
        <value>/data0/yarn/logs,/data1/yarn/logs,/data2/yarn/logs,/data3/yarn/logs,/data4/yarn/logs,/data5/yarn/logs,/data6/yarn/logs,/data7/yarn/logs,/data8/yarn/logs,/data9/yarn/logs,/data10/yarn/logs,/data11/yarn/logs</value>
    </property>
-->
    <property>
        <name>yarn.resourcemanager.scheduler.class</name>
        <value>org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler</value>
    </property>
    <property>
        <name>yarn.scheduler.fair.allocation.file</name>
        <value>/software/servers/hadoop-2.2.0/etc/hadoop/fair-scheduler.xml</value>
    </property>
    <property>
        <name>yarn.scheduler.fair.assignmultiple</name>
        <value>true</value>
    </property>
    <property>
        <name>yarn.scheduler.fair.allow-undeclared-pools</name>
        <value>false</value>
    </property>
    <property>
        <name>yarn.scheduler.fair.locality.threshold.node</name>
        <value>1</value>
    </property>
    <property>
        <name>yarn.scheduler.fair.locality.threshold.rack</name>
        <value>1</value>
    </property>      
    <property>
        <name>yarn.scheduler.minimum-allocation-mb</name>
        <value>512</value>
    </property>
    <property>
        <name>yarn.scheduler.maximum-allocation-mb</name>
        <value>101376</value>
    </property>
    <property>
        <name>yarn.nodemanager.resource.memory-mb</name>
        <value>101376</value>
    </property>
    <property>
        <name>yarn.nodemanager.vmem-pmem-ratio</name>
        <value>3.1</value>
    </property>
    <property>
        <name>yarn.nodemanager.pmem-check-enabled</name>
        <value>true</value>
    </property>
    <!-- default
    <property>
        <name>yarn.nodemanager.vmem-check-enabled</name>
        <value>true</value>
    </property>
    -->
    <property>
        <name>yarn.nodemanager.vmem-check-enabled</name>
        <value>false</value>
    </property>
    <property>
        <name>yarn.nodemanager.resource.cpu-vcores</name>
        <value>28</value>
    </property>
    <property>
        <name>yarn.scheduler.minimum-allocation-vcores</name>
        <value>1</value>
    </property>
    <property>
        <name>yarn.scheduler.maximum-allocation-vcores</name>
        <value>12</value>
    </property>
    <property>
        <name>yarn.nodemanager.log.retain-seconds</name>
        <value>86400</value>
    </property>
    <property>
        <name>yarn.nodemanager.remote-app-log-dir</name>
        <value>/tmp/cdhapp-logs</value>
    </property>
    <property>
        <name>yarn.nodemanager.remote-app-log-dir-suffix</name>
        <value>logs</value>
    </property>
    <property>
        <name>yarn.nodemanager.aux-services</name>
        <value>mapreduce_shuffle</value>
    </property>
    <property>
        <name>yarn.log-aggregation.retain-seconds</name>
        <value>864000</value>
    </property>
    <property>
        <name>yarn.log-aggregation.retain-check-interval-seconds</name>
        <value>86400</value>
    </property>
    <property>
        <name>yarn.nodemanager.delete.debug-delay-sec</name>
        <value>3600</value>
    </property>
    <property>
        <name>yarn.resourcemanager.nodes.include-path</name>
        <value>/software/servers/hadoop-2.2.0/etc/hadoop/hosts/mapred_hosts</value>
    </property>
    <property>
        <name>yarn.resourcemanager.nodes.exclude-path</name>
        <value>/software/servers/hadoop-2.2.0/etc/hadoop/hosts/exclude_mapred_hosts</value>
    </property>
    <property>
        <name>yarn.application.classpath</name>
        <value>$HADOOP_CONF_DIR,$HADOOP_COMMON_HOME/share/hadoop/common/*,$HADOOP_COMMON_HOME/share/hadoop/common/lib/*,$HADOOP_HDFS_HOME/share/hadoop/hdfs/*,$HADOOP_HDFS_HOME/share/hadoop/hdfs/lib/*,$HADOOP_YARN_HOME/share/hadoop/yarn/*,$HADOOP_YARN_HOME/share/hadoop/yarn/lib/*,/software/servers/shark-0.9.1/hivesh/*</value>
    </property>
    <property>
      <name>yarn.nodemanager.address</name>
      <value>${yarn.nodemanager.hostname}:50086</value>
    </property>
</configuration>
